# 农作物病害识别系统

基于 MindSpore 深度学习框架构建的端到端农作物病害识别系统，支持玉米、马铃薯、番茄、苹果、葡萄等多种作物的病害检测与分析，集成大语言模型辅助分析能力，为农业生产提供智能化的病害识别与解决方案建议。

## 项目简介

本项目聚焦于农业生产中的作物病害识别需求，基于MindSpore深度学习框架实现病害的精准分类与分析，提供从数据预处理、模型训练到推理服务、前端交互的全流程解决方案。系统不仅能快速识别病害类型，还可通过光谱分析、热力图可视化等方式呈现作物健康状态，并依托大语言模型能力生成病害成因解读与防治建议。

## 核心功能

1. 多作物病害识别：支持玉米、马铃薯、番茄、苹果、葡萄五大类作物的病害检测
2. 高精度病害分类：基于深度学习模型实现病害类型的精准识别与分类
3. 光谱健康分析：结合光谱数据评估作物整体健康状况
4. 病害可视化：生成热力图直观展示作物病害分布区域
5. 友好交互界面：提供Web可视化操作界面，降低使用门槛
6. 大模型辅助分析：基于LLaMA大模型生成病害成因、防治建议等智能化解读内容

## 项目结构

```
crop-disease-detection/
├── 图像识别/             # 作物病害图像识别核心模块
│   ├── app.py                # 主应用程序，提供图像识别API服务
│   ├── end_train.py          # 图像识别模型训练脚本（MindSpore框架）
│   ├── mindrecord_generator.py # 病害图像数据预处理工具
│   ├── index.html            # 图像识别功能前端主界面
│   ├── ckpt/                 # 各作物病害识别模型权重目录
│   │   ├── corn_best_epoch.ckpt    # 玉米病害识别最优权重
│   │   ├── potato_best_epoch.ckpt  # 马铃薯病害识别最优权重
│   │   ├── tomato_best_epoch.ckpt  # 番茄病害识别最优权重
│   │   ├── apple_best_epoch.ckpt   # 苹果病害识别最优权重
│   │   └── grape_best_epoch.ckpt   # 葡萄病害识别最优权重
│   ├── frontend/             # 前端资源目录（样式、脚本、图片等静态资源）
│   └── plots/                # 训练曲线图目录（损失/准确率曲线等）
├── LLaMA-Factory/        # LLaMA大模型集成目录（病害文本分析相关）
│   ├── data/             # 大模型数据目录（病害知识库、微调数据集、提示词模板等）
│   ├── log/              # 大模型运行日志目录（训练指标、推理日志、错误日志等）
│   └── output/           # 大模型输出目录（微调后权重、病害分析报告等）
└── README.md             # 项目说明文档

```

## 环境要求

| 依赖项     | 版本要求  |
| ---------- | --------- |
| Python     | ≥ 3.8    |
| MindSpore  | ≥ 2.0.0  |
| Flask      | ≥ 2.0.0  |
| NumPy      | ≥ 1.21.0 |
| Matplotlib | ≥ 3.4.0  |
| Pillow     | ≥ 8.0.0  |

## 目录详细说明

| 目录/文件                 | 说明                                                                        |
| ------------------------- | --------------------------------------------------------------------------- |
| `ckpt/`                 | 存放各作物病害识别模型训练完成后的最优权重文件，推理阶段直接加载使用        |
| `frontend/`             | 存放Web界面的CSS、JavaScript、图片等静态资源，保障前端界面交互体验          |
| `plots/`                | 存储模型训练过程中生成的损失曲线、准确率曲线等可视化图表，便于分析训练效果  |
| `LLaMA-factory/data/`   | 存储大模型微调所需的病害知识库、问答对数据集，以及推理时的提示词模板        |
| `LLaMA-factory/log/`    | 记录大模型训练的损失、精度等指标，以及推理阶段的请求/响应日志，便于问题排查 |
| `LLaMA-factory/output/` | 保存微调后的大模型权重、批量推理生成的病害分析报告等输出内容                |

## 注意事项

1. 模型训练前需确保数据集格式符合要求，可参考 `mindrecord_generator.py`中的数据格式说明
2. LLaMA大模型功能需提前下载对应模型权重，并配置 `LLaMA-factory`目录下的相关参数
3. 建议在GPU环境下运行模型训练，以提升训练效率；推理阶段支持CPU/GPU切换
4. 如遇端口占用问题，可修改 `app.py`中的端口配置参数
